"use strict";function gsuiOscilloscope(t){this.canvas=t,this.ctx=t.getContext("2d"),this.maxValue=0,this.setPinch(0),this.drawBegin(function(t,i,s,e){t.fillRect(0,0,s,e),t.lineWidth=2,t.strokeStyle="rgb(255,255,255)"}),this.drawEnd()}function gsuiSpanEditable(t,i){this.element=t,this.data=i,this.placeholder="",this.span=t.querySelector("span"),this.input=t.querySelector("input"),t.ondblclick=this.__elementDblclick.bind(this),this.input.onblur=this.__inputBlur.bind(this),this.input.onkeydown=this.__inputKeydown.bind(this)}function gsuiToggle(t,i){this.element=t,this.data=i,this.isOn=!1,this._circleClass=t.querySelector(".gsui-circle").classList,t.oncontextmenu=function(){return!1},t.onmousedown=this.__elementMousedown.bind(this)}function gsuiWaveform(t){this.svg=t,this.polygon=t.querySelector("polygon")}!function(){var t=Handlebars.template,i=Handlebars.templates=Handlebars.templates||{};i.gsuiOscilloscope=t({compiler:[7,">= 4.0.0"],main:function(t,i,s,e,n){return'<canvas class="gsuiOscilloscope"></canvas>\r\n'},useData:!0}),i.gsuiSpanEditable=t({compiler:[7,">= 4.0.0"],main:function(t,i,s,e,n){return'<div class="gsuiSpanEditable">\r\n\t<span class="gsui-textOverflow"></span>\r\n\t<input type="text"/>\r\n</div>\r\n'},useData:!0}),i.gsuiToggle=t({compiler:[7,">= 4.0.0"],main:function(t,i,s,e,n){return'<div class="gsuiToggle">\r\n\t<div class="gsui-circle"></div>\r\n</div>\r\n'},useData:!0}),i.gsuiWaveform=t({compiler:[7,">= 4.0.0"],main:function(t,i,s,e,n){return'<svg class="gsuiWaveform" preserveAspectRatio="none">\r\n\t<polygon/>\r\n</svg>\r\n'},useData:!0})}(),gsuiOscilloscope.prototype={setResolution:function(t,i){this.canvas.width=t,this.canvas.height=i},setPinch:function(t){this.pinch=Math.max(0,Math.min(t,1))},clear:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},startAnimation:function(){if(!this.frameId){var t=this;this.frameId=requestAnimationFrame(function i(){t.draw(t.fnData()),t.frameId=requestAnimationFrame(i)})}},stopAnimation:function(){cancelAnimationFrame(this.frameId),this.frameId=null},dataFunction:function(t){this.fnData=t},drawBegin:function(t){this.fnBegin=t||function(){}},drawEnd:function(t){this.fnEnd=t||function(){}},draw:function(t){var i,s,e=this.maxValue,n=this.canvas,a=this.ctx,o=n.width,h=n.height,u=h/2,l=t.length,c=Math.ceil(this.pinch/2*l),r=o/(l-1);for(this.fnBegin(a,e,o,h),a.beginPath(),e=0,i=0;i<l;++i)s=t[i]/256,e=Math.max(e,s),s-=.5,(i<c||l-c<=i)&&(s*=.5-Math.cos(Math.PI*(i<c?i:l-i)/c)/2),i?a.lineTo(i*r,u+s*h):a.moveTo(0,u+s*h);this.fnEnd(a,e,o,h),a.stroke(),this.maxValue=e}},gsuiSpanEditable.prototype={getValue:function(){return this.value},setValue:function(t){t=t.trim(),t===this.placeholder&&(t=""),this.element.classList.toggle("gsui-empty",!t),this.span.textContent=t||this.placeholder,t!==this.value&&(this.value=t,this.data.onchange&&this.data.onchange(this.value))},setPlaceholder:function(t){this.placeholder=t.trim(),this.value||this.setValue(t)},__elementDblclick:function(t){this.input.value=this.value,this.element.classList.add("gsui-editing"),this.input.focus(),this.input.select()},__inputBlur:function(t){this.__esc||(this.setValue(t.target.value),this.element.classList.remove("gsui-editing")),this.__esc=!1},__inputKeydown:function(t){t.stopPropagation(),13!==t.keyCode&&27!==t.keyCode||(this.__esc=27===t.keyCode,this.__esc||this.setValue(t.target.value),this.element.classList.remove("gsui-editing"))}},gsuiToggle.prototype={toggle:function(t){t!==this.isOn&&(this.isOn=t,this._circleClass.toggle("gsui-on",t),this.data.onchange&&this.data.onchange(t))},groupWith:function(t){var i=this.group;t.group=t.group||[t],t!==this&&i!==t.group&&(i&&i.splice(i.indexOf(this),1),this.group=t.group,t.group.push(this))},__elementMousedown:function(t){if(0===t.button)this.toggle(!this.isOn);else if(2===t.button){if(this.group){var i=this.group.every(function(t){return t===this||!t.isOn},this);this.group.forEach(function(t){t!==this&&t.toggle(i)},this)}this.toggle(!0)}}},gsuiWaveform.prototype={setResolution:function(t,i){this.width=t,this.height=i,this.svg.setAttribute("viewBox","0 0 "+t+" "+i)},draw:function(t,i,s,e,n){var a,o=this.width,h=this.height,u=h/2,l=t.length,c=~~(e/s*l),r=n/s*l/o,g="0,"+(u+t[c]*u),p="0,"+(u+i[c]*u),d=~~Math.max(1,r/100);for(a=1;a<o;++a){for(var f=1/0,m=-(1/0),v=~~(c+(a-1)*r),_=v+r;v<_;v+=d)f=Math.min(f,t[v],i[v]),m=Math.max(m,i[v],t[v]);Math.abs(m-f)*u<1&&(m+=1/h,f-=1/h),g+=" "+a+","+(u+f*u),p=a+","+(u+m*u)+" "+p}this.polygon.setAttribute("points",g+" "+p)}};